---
- name: Add yum package yum-utils
  yum: 
    name: yum-utils
    state: latest 

- name: Add yum docker repo
  command: yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo

- name: Install containerd.io
  yum: 
    name: containerd.io
    state: latest
    enablerepo: docker-ce-test

- name: Install docker-ce
  yum:
    name: docker-ce
    state: latest

- name: Install docker-ce-cli
  yum: 
    name: docker-ce-cli
    state: latest

- name: Start docker service
  systemd:
    name: docker 
    state: started

- name: Check docker version
  command: docker version

# - name: Set file stats on index.html
#   file: path=/var/www/html/index.html owner=root group=root mode=0644

# - name: Deploy modified apache conf
#   copy: src=apache2.conf dest=/etc/apache2/apache2.conf
#         owner=root group=root mode=0644

# - name: Enable mod_headers
#   file: path=/etc/apache2/mods-enabled/headers.load
#         src=/etc/apache2/mods-available/headers.load state=link

# - name: Re-start apache
#   service: name=apache2 state=restarted
